<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lumos DT Portal</title>
<style>
  body { font-family: sans-serif; display: flex; align-items: center; justify-content: center; min-height: 100vh; background: #f0f4ff; color: #64748b; }
  .loading { text-align: center; }
  .spinner { width: 36px; height: 36px; border: 4px solid #e0e4ef; border-top-color: #6366f1; border-radius: 50%; animation: spin .6s linear infinite; margin: 0 auto 12px; }
  @keyframes spin { to { transform: rotate(360deg); } }
</style>
</head>
<body>
<div class="loading">
  <div class="spinner"></div>
  <p>Redirecting...</p>
</div>
<script>
(async function() {
  try {
    const r = await fetch('/api/auth/me', { credentials: 'same-origin' });
    if (!r.ok) { window.location.href = '/login.html'; return; }
    const u = await r.json();
    const routes = { admin: '/admin.html', teacher: '/teacher.html', student: '/student.html' };
    window.location.href = routes[u.role] || '/student.html';
  } catch (e) {
    window.location.href = '/login.html';
  }
})();
</script>
</body>
</html>
